/**
 * Game.js
 * @version 1.0.0
 * Copyright 2023 (c) WetRain 
 * All rights reserved.
 */

var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(c){return c.raw=c};$jscomp.createTemplateTagFirstArgWithRaw=function(c,f){c.raw=f;return c};
(function(){var c=this,f={role:function(b,d){return d?document.querySelector(d+'[data-game-role="'+b+'"]'):document.querySelector('[data-game-role="'+b+'"]')},setElementClassName:function(b){var d="";for(var g=0;20>g;g++)d+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".charAt(Math.floor(52*Math.random()));document.body.className=d;0==b||null===f.role("style","style")?(b=document.createElement("style"),b.innerHTML="."+d+"{width: 100vw !important;height: 100vh !important;margin: 0 !important; overflow: hidden !important;};",
b.setAttribute("data-game-role","style"),document.head.appendChild(b)):1==b&&(f.role("style","style").innerHTML="."+d+"{width: 100vw !important;height: 100vh !important;margin: 0 !important; overflow: hidden !important;};")},message:function(b,d){return"warn"==d?setTimeout(console.warn.bind(console,b)):"error"==d?setTimeout(console.error.bind(console,b)):setTimeout(console.log.bind(console,b))}},a=this;f.setElementClassName(!1);a.element=document.createElement("canvas");a.width=document.body.clientWidth;
a.height=document.body.clientHeight;this.element.setAttribute("data-game-role","game-window");this.element.width=this.width;this.element.height=this.height;document.body.appendChild(this.element);a.ctx=this.element.getContext("2d");a.BlockData=[];a.BlockColor="#ff6666 #ff8c66 #ffb366 #ffd966 #ffff66 #d9ff66 #b3ff66 #8cff66 #66ff66 #66ff8c #66ffb3 #66ffd9 #66ffff #66d9ff #66b3ff #668cff #6666ff #8c66ff #b366ff #d966ff #ff66ff #ff66d9 #ff66b3 #ff668c #ff6666".split(" ");a.BlockWidth=30;a.BlockHeight=
30;a.CanNotGenerateBlocks=.3;a.BlockPercent=.3;var k={RoundBlock:function(b,d,g,r){var h=c.ctx,m=a.BlockWidth,n=a.BlockHeight,p=b+g,t=b+m;m=b+m;var q=d+n;n=d+n;h.beginPath();h.moveTo(p,d);h.arcTo(t,d,m,q,g);h.arcTo(m,q,b,n,g);h.arcTo(b,n,b,d,g);h.arcTo(b,d,p,d,g);h.fillStyle=a.BlockColor[r];h.strokeStyle="#fff";h.stroke();h.fill()},GenerateRandomPosition:function(){var b=(Math.floor(Math.random()*a.width/a.BlockWidth)*a.BlockWidth).toString(16),d=(Math.floor(Math.random()*Math.floor(a.height/a.BlockHeight*
(1-a.CanNotGenerateBlocks)))*a.BlockHeight).toString(16),g=Math.floor(Math.random()*a.BlockColor.length).toString(16);return 0==a.BlockData.indexOf({x:b,y:d})?k.GenerateRandomPosition():[b,d,g]},GenerateRandomBlock:function(b){a.BlockData.splice(0,a.BlockData.length);for(i=0;i<b;i++)a.BlockData.push({x:k.GenerateRandomPosition()[0],y:k.GenerateRandomPosition()[1],color:k.GenerateRandomPosition()[2]});k.Blocks()},Blocks:function(){for(i=0;i<a.BlockData.length;i++)k.RoundBlock(parseInt(a.BlockData[i].x,
16),parseInt(a.BlockData[i].y,16),5,parseInt(a.BlockData[i].color,16))}};k.GenerateRandomBlock(Math.floor(Math.floor(a.width/a.BlockWidth)*Math.floor(a.height/a.BlockHeight*(1-a.CanNotGenerateBlocks))*a.BlockPercent));window.addEventListener("resize",function(){a.width=document.body.clientWidth;a.height=document.body.clientHeight;f.role("game-window","canvas").width=document.body.clientWidth;f.role("game-window","canvas").height=document.body.clientHeight;a.ctx=f.role("game-window","canvas").getContext("2d");
f.setElementClassName(!0);k.Blocks();l.GenerateXY()});this.element.addEventListener("error",function(b){f.message(b,"warn");return!1});var l={SetGameParam:function(b,d){a.BlockPercent=b/100;1==d&&a.ctx.clearRect(0,0,a.element.width,a.element.height);k.GenerateRandomBlock(Math.floor(Math.floor(a.width/a.BlockWidth)*Math.floor(a.height/a.BlockHeight*(1-a.CanNotGenerateBlocks))*a.BlockPercent));l.GenerateXY()}},e=document.createElement("input");e.type="number";e.max=100;e.min=0;e.placeholder="\u65b9\u584a\u751f\u6210\u7387";
e.style="position: fixed;z-index: 9;top: 40px;right: 10px;background: rgba(255,255,255,.5);border: 0;padding: 10px;border-bottom: 2px solid #c0c0c0;font-family: sans-serif;border-radius: 5px;width: 90px;outline: none;";e.addEventListener("input",function(b){100<e.value?e.value=100:0>e.value?e.value=0:null;l.SetGameParam(e.value,!0)});e.addEventListener("focus",function(){a.element.style="transition: all 0.1s ease-in;background: rgba(0, 0, 0, 0.5);filter: brightness(50%);";e.style="position: fixed;z-index: 9;top: 40px;right: 10px;background: rgba(255,255,255,1);border: 0;padding: 10px;border-bottom: 2px solid #c0c0c0;font-family: sans-serif;border-radius: 5px;width: 90px;outline: none;"});
e.addEventListener("blur",function(){a.element.style="transition: all 0.1s ease-in;";e.style="position: fixed;z-index: 9;top: 40px;right: 10px;background: rgba(255,255,255,.5);border: 0;padding: 10px;border-bottom: 2px solid #c0c0c0;font-family: sans-serif;border-radius: 5px;width: 90px;outline: none;"});document.body.appendChild(e);l.GenerateXY=function(){c.ctx.strokeStyle="#C0C0C0";c.ctx.fillStyle="#6D6D6D";c.ctx.font="16px Arial";c.ctx.textAlign="center";for(i=0;i<a.element.width/5/30;i++)for(0==
i&&(c.ctx.strokeStyle="#6D6D6D"),c.ctx.lineWidth=1,c.ctx.beginPath(),c.ctx.moveTo(150*i,0),c.ctx.lineTo(150*i,a.element.height),c.ctx.stroke(),c.ctx.strokeStyle="#fff",0==i?(c.ctx.strokeText(5*i,16,22),c.ctx.fillText(5*i,16,22)):(c.ctx.strokeText(5*i,150*i,22),c.ctx.fillText(5*i,150*i,22)),j=1;5>j;j++)c.ctx.strokeStyle="#C0C0C0",c.ctx.lineWidth=.45,c.ctx.beginPath(),c.ctx.moveTo(30*(5*i+j),0),c.ctx.lineTo(30*(5*i+j),a.element.height),c.ctx.stroke();for(i=0;i<a.element.height/5/30;i++)for(0==i&&(c.ctx.strokeStyle=
"#6D6D6D"),c.ctx.lineWidth=1,c.ctx.beginPath(),c.ctx.moveTo(0,150*i),c.ctx.lineTo(a.element.width,150*i),c.ctx.stroke(),c.ctx.strokeStyle="#fff",0==i?null:(c.ctx.strokeText(5*i,16,150*i+6),c.ctx.fillText(5*i,16,150*i+6)),j=1;5>j;j++)c.ctx.strokeStyle="#C0C0C0",c.ctx.lineWidth=.45,c.ctx.beginPath(),c.ctx.moveTo(0,30*(5*i+j)),c.ctx.lineTo(a.element.width,30*(5*i+j)),c.ctx.stroke();var b=new Image;b.onload=function(){a.ctx.drawImage(b,a.element.width-34,86)};b.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' class='icon icon-tabler icon-tabler-reload' width='24' height='24' viewBox='0 0 24 24' stroke-width='2' stroke='currentColor' fill='none' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath stroke='none' d='M0 0h24v24H0z' fill='none'%3E%3C/path%3E%3Cpath d='M19.933 13.041a8 8 0 1 1 -9.925 -8.788c3.899 -1.002 7.935 1.007 9.425 4.747'%3E%3C/path%3E%3Cpath d='M20 4v5h-5'%3E%3C/path%3E%3C/svg%3E"};
l.GenerateXY();document.addEventListener("mousemove",function(b){a.element.width-34<b.offsetX&&b.offsetX<a.element.width-14&&86<b.offsetY&&110>b.offsetY?a.element.style.cursor="pointer":a.element.style.cursor="default"});document.addEventListener("click",function(b){a.element.width-34<b.offsetX&&b.offsetX<a.element.width-14&&86<b.offsetY&&110>b.offsetY&&(a.ctx.clearRect(0,0,a.element.width,a.element.height),k.GenerateRandomBlock(Math.floor(Math.floor(a.width/a.BlockWidth)*Math.floor(a.height/a.BlockHeight*
(1-a.CanNotGenerateBlocks))*a.BlockPercent)),l.GenerateXY())})})();